import { create, all, BigNumber, ConfigOptions } from 'mathjs';
import { UserInput, SlotModel } from "./type";

const config: ConfigOptions = {
    number: 'BigNumber'
};
const math = create(all, config);

/* ユーザ入力情報管理 */
export const userInputStr: UserInput = {
    modelName: '',
    n: [],
    x: [],
    w: [],
}

/* bignumber定数 */
export const one = math.bignumber(1);
export const zero = math.bignumber(0);
export const hundred = math.bignumber(100);

/* 台データ（データ元） */
/*
    レギュレーション
    type: 'SlotDataSource'
    modelName: 日本語文字列
    settingNames: 設定名のリスト
    flagNames: フラグ名のリスト、各フラグが互いに排他関係にあること、はずれフラグは含まないものとする
    ptable: 各設定におけるフラグ成立確率、float、ptable[設定][フラグ]=>成立確率、はずれフラグは含まないものとする
*/
export const slotDataSources_ = [
    {
        modelName: 'アイムジャグラー',
        settingNames: ['設定_1', '設定_2', '設定_3', '設定_4', '設定_5', '設定_6',],
        flagNames: ['grape', 'singleBig', 'cherryBig', 'singleReg', 'cherryReg',],
        ptable: [
            [1 / 6.02, 1 / 389.2, 1 / 915.8, 1 / 633.4, 1 / 1439.3,],
            [1 / 6.02, 1 / 381.5, 1 / 920.0, 1 / 568.7, 1 / 1344.1,],
            [1 / 6.02, 1 / 381.5, 1 / 920.0, 1 / 471.4, 1 / 1111.1,],
            [1 / 6.02, 1 / 370.0, 1 / 863.2, 1 / 446.3, 1 / 1071.1,],
            [1 / 6.02, 1 / 370.0, 1 / 863.2, 1 / 361.7, 1 / 864.1,],
            [1 / 5.78, 1 / 361.7, 1 / 864.1, 1 / 361.7, 1 / 864.1,],
        ],
    },
    {
        modelName: 'マイジャグラー5',
        settingNames: ['設定_1', '設定_2', '設定_3', '設定_4', '設定_5', '設定_6',],
        flagNames: ['grape', 'singleBig', 'cherryBig', 'singleReg', 'cherryReg',],
        ptable: [
            [1 / 5.90, 1 / 382.1, 1 / 1383.9, 1 / 635.2, 1 / 1152.8],
            [1 / 5.86, 1 / 380.8, 1 / 1336.6, 1 / 559.6, 1 / 1239.1],
            [1 / 5.83, 1 / 373.9, 1 / 1304.7, 1 / 488.9, 1 / 1075.7],
            [1 / 5.83, 1 / 357.9, 1 / 1211.2, 1 / 406.0, 1 / 1014.9],
            [1 / 5.83, 1 / 335.5, 1 / 1155.8, 1 / 377.3, 1 / 932.2],
            [1 / 5.79, 1 / 318.0, 1 / 1113.0, 1 / 318.0, 1 / 820.1],
        ],
    },
    {
        modelName: 'ファンキージャグラー2',
        settingNames: ['設定_1', '設定_2', '設定_3', '設定_4', '設定_5', '設定_6',],
        flagNames: ['grape', 'singleBig', 'cherryBig', 'singleReg', 'cherryReg',],
        ptable: [
            [1 / 5.92, 1 / 357.9, 1 / 1048.3, 1 / 650.7, 1 / 1478.0],
            [1 / 5.91, 1 / 345.4, 1 / 1029.0, 1 / 568.0, 1 / 1390.9],
            [1 / 5.90, 1 / 353.1, 1 / 971.8, 1 / 500.1, 1 / 1278.5],
            [1 / 5.88, 1 / 330.6, 1 / 995.9, 1 / 444.7, 1 / 1210.4],
            [1 / 5.83, 1 / 328.5, 1 / 923.9, 1 / 410.0, 1 / 1241.2],
            [1 / 5.81, 1 / 295.4, 1 / 917.1, 1 / 345.8, 1 / 1061.9],
        ],
    },
];

export const slotModelDataSources: SlotModel[] = [
    {
        modelName: 'アイムジャグラー',
        settingNames: ['設定_1', '設定_2', '設定_3', '設定_4', '設定_5', '設定_6',],
        modeNames: ['通常時', 'ボーナス確率のみ（前任者実践値としても利用可）'],
        denominatorNamesByMode: ['総ゲーム数', '総ゲーム数'],
        elementNamesByMode: [
            ['ぶどう', '単独BIG', 'チェリーBIG', '単独REG', 'チェリーREG',],
            ['BIG', 'REG',],
        ],
        table: [
            [[1 / 6.02, 1 / 389.2, 1 / 915.8, 1 / 633.4, 1 / 1439.3], [1 / 273.1, 1 / 439.8]],
            [[1 / 6.02, 1 / 381.5, 1 / 920.0, 1 / 568.7, 1 / 1344.1], [1 / 269.7, 1 / 399.6]],
            [[1 / 6.02, 1 / 381.5, 1 / 920.0, 1 / 471.4, 1 / 1111.1], [1 / 269.7, 1 / 331.0]],
            [[1 / 6.02, 1 / 370.0, 1 / 863.2, 1 / 446.3, 1 / 1071.1], [1 / 259.0, 1 / 315.1]],
            [[1 / 6.02, 1 / 370.0, 1 / 863.2, 1 / 361.7, 1 / 864.1], [1 / 259.0, 1 / 255.0]],
            [[1 / 5.78, 1 / 361.7, 1 / 864.1, 1 / 361.7, 1 / 864.1], [1 / 255.0, 1 / 255.0]],
        ],
    },
    {
        modelName: 'マイジャグラー5',
        settingNames: ['設定_1', '設定_2', '設定_3', '設定_4', '設定_5', '設定_6',],
        modeNames: ['通常時', 'ボーナス確率のみ（前任者実践値としても利用可）'],
        denominatorNamesByMode: ['総ゲーム数', '総ゲーム数'],
        elementNamesByMode: [
            ['ぶどう', '単独BIG', 'チェリーBIG', '単独REG', 'チェリーREG',],
            ['BIG', 'REG',],
        ],
        table: [
            [[1 / 5.90, 1 / 382.1, 1 / 1383.9, 1 / 635.2, 1 / 1152.8], [1 / 273.1, 1 / 409.6]],
            [[1 / 5.86, 1 / 380.8, 1 / 1336.6, 1 / 559.6, 1 / 1239.1], [1 / 270.8, 1 / 385.5]],
            [[1 / 5.83, 1 / 373.9, 1 / 1304.7, 1 / 488.9, 1 / 1075.7], [1 / 266.4, 1 / 336.1]],
            [[1 / 5.83, 1 / 357.9, 1 / 1211.2, 1 / 406.0, 1 / 1014.9], [1 / 254.0, 1 / 290.0]],
            [[1 / 5.83, 1 / 335.5, 1 / 1155.8, 1 / 377.3, 1 / 932.2], [1 / 240.1, 1 / 268.6]],
            [[1 / 5.79, 1 / 318.0, 1 / 1113.0, 1 / 318.0, 1 / 820.1], [1 / 229.1, 1 / 229.1]],
        ],
    },
    {
        modelName: 'マイジャグラー5（wip2023/02）',
        settingNames: ['設定_1', '設定_2', '設定_3', '設定_4', '設定_5', '設定_6',],
        modeNames: ['通常時', 'ボーナス確率のみ（前任者実践値としても利用可）'],
        denominatorNamesByMode: ['総ゲーム数', '総ゲーム数'],
        elementNamesByMode: [
            ['ぶどう', '非重複チェリー', 'レアBIG', '単独BIG', 'チェリーBIG', '単独REG', 'チェリーREG',],
            ['BIG', 'REG',],
        ],
        table: [
            [[1 / 5.90, 1 / 38.10, 1 / 1820.45, 1 / 420.10, 1 / 1365.33, 1 / 655.36, 1 / 1092.27], [1 / 273.07, 1 / 409.60]],
            [[1 / 5.85, 1 / 38.10, 1 / 1820.45, 1 / 414.78, 1 / 1365.33, 1 / 595.78, 1 / 1092.27], [1 / 270.81, 1 / 385.51]],
            [[1 / 5.80, 1 / 36.82, 1 / 1820.45, 1 / 404.54, 1 / 1365.33, 1 / 496.48, 1 / 1040.25], [1 / 266.41, 1 / 336.08]],
            [[1 / 5.78, 1 / 35.62, 1 / 1820.45, 1 / 376.64, 1 / 1365.33, 1 / 404.54, 1 / 1024.00], [1 / 254.01, 1 / 289.98]],
            [[1 / 5.76, 1 / 35.62, 1 / 1820.45, 1 / 348.60, 1 / 1337.47, 1 / 390.10, 1 / 862.32], [1 / 240.06, 1 / 268.59]],
            [[1 / 5.66, 1 / 35.62, 1 / 1820.45, 1 / 341.33, 1 / 1129.93, 1 / 327.68, 1 / 762.05], [1 / 229.15, 1 / 229.15]],
        ],
    },
    {
        modelName: 'ファンキージャグラー2',
        settingNames: ['設定_1', '設定_2', '設定_3', '設定_4', '設定_5', '設定_6',],
        modeNames: ['通常時', 'ボーナス確率のみ（前任者実践値としても利用可）'],
        denominatorNamesByMode: ['総ゲーム数', '総ゲーム数'],
        elementNamesByMode: [
            ['ぶどう', '単独BIG', 'チェリーBIG', '単独REG', 'チェリーREG',],
            ['BIG', 'REG',],
        ],
        table: [
            [[1 / 5.92, 1 / 357.9, 1 / 1048.3, 1 / 650.7, 1 / 1478.0], [1 / 266.4, 1 / 439.8]],
            [[1 / 5.91, 1 / 345.4, 1 / 1029.0, 1 / 568.0, 1 / 1390.9], [1 / 259.0, 1 / 407.1]],
            [[1 / 5.90, 1 / 353.1, 1 / 971.8, 1 / 500.1, 1 / 1278.5], [1 / 256.0, 1 / 366.1]],
            [[1 / 5.88, 1 / 330.6, 1 / 995.9, 1 / 444.7, 1 / 1210.4], [1 / 249.2, 1 / 322.8]],
            [[1 / 5.83, 1 / 328.5, 1 / 923.9, 1 / 410.0, 1 / 1241.2], [1 / 240.1, 1 / 299.3]],
            [[1 / 5.81, 1 / 295.4, 1 / 917.1, 1 / 345.8, 1 / 1061.9], [1 / 219.9, 1 / 262.1]],
        ],
    },
    {
        modelName: 'ファンキージャグラー2（wip2023/02）',
        settingNames: ['設定_1', '設定_2', '設定_3', '設定_4', '設定_5', '設定_6',],
        modeNames: ['通常時', 'ボーナス確率のみ（前任者実践値としても利用可）'],
        denominatorNamesByMode: ['総ゲーム数', '総ゲーム数'],
        elementNamesByMode: [
            ['ぶどう', '非重複チェリー', 'レアBIG', '単独BIG', 'チェリーBIG', '単独REG', 'チェリーREG',],
            ['BIG', 'REG',],
        ],
        table: [
            [[1 / 5.94, 1 / 35.62, 1 / 1724.63, 1 / 404.54, 1 / 1424.70, 1 / 630.15, 1 / 1456.36], [1 / 266.41, 1 / 439.84]],
            [[1 / 5.93, 1 / 35.62, 1 / 1638.40, 1 / 397.19, 1 / 1365.33, 1 / 585.14, 1 / 1337.47], [1 / 259.04, 1 / 407.05]],
            [[1 / 5.88, 1 / 35.62, 1 / 1560.38, 1 / 394.80, 1 / 1365.33, 1 / 512.00, 1 / 1285.02], [1 / 256.00, 1 / 366.12]],
            [[1 / 5.83, 1 / 35.62, 1 / 1489.46, 1 / 383.25, 1 / 1365.33, 1 / 448.88, 1 / 1149.75], [1 / 249.19, 1 / 322.84]],
            [[1 / 5.75, 1 / 35.62, 1 / 1394.38, 1 / 374.49, 1 / 1285.02, 1 / 404.54, 1 / 1149.75], [1 / 240.06, 1 / 299.25]],
            [[1 / 5.66, 1 / 35.62, 1 / 1310.72, 1 / 334.37, 1 / 1260.31, 1 / 352.34, 1 / 1024.00], [1 / 219.92, 1 / 262.14]],
        ],
    },
    {
        modelName: 'ハッピージャグラーV3（wip2023/02）',
        settingNames: ['設定_1', '設定_2', '設定_3', '設定_4', '設定_5', '設定_6',],
        modeNames: ['通常時', 'ボーナス確率のみ（前任者実践値としても利用可）', 'チェリー重複当選率（試行回数=全チェリー出現回数）'],
        denominatorNamesByMode: ['総ゲーム数', '総ゲーム数', '総チェリー'],
        elementNamesByMode: [
            ['ぶどう', '非重複チェリー', '単独＆レアBIG', 'チェリーBIG', '単独REG', 'チェリーREG',],
            ['BIG', 'REG',],
            ['重複チェリー'],
        ],
        table: [
            [[1 / 6.04, 1 / 62.24, 1 / 358.12, 1 / 1149.75, 1 / 689.85, 1 / 936.23], [1 / 273.07, 1 / 397.19], [0.1076]],
            [[1 / 6.01, 1 / 62.47, 1 / 354.25, 1 / 1149.75, 1 / 612.49, 1 / 885.62], [1 / 270.81, 1 / 362.08], [0.1110]],
            [[1 / 5.98, 1 / 63.02, 1 / 341.33, 1 / 1149.75, 1 / 574.88, 1 / 789.59], [1 / 263.19, 1 / 332.67], [0.1186]],
            [[1 / 5.84, 1 / 64.00, 1 / 348.60, 1 / 936.23, 1 / 496.48, 1 / 762.05], [1 / 254.02, 1 / 300.62], [0.1322]],
            [[1 / 5.81, 1 / 64.69, 1 / 322.84, 1 / 923.04, 1 / 455.11, 1 / 682.67], [1 / 239.18, 1 / 273.07], [0.1415]],
            [[1 / 5.79, 1 / 65.27, 1 / 296.54, 1 / 949.80, 1 / 439.84, 1 / 612.49], [1 / 225.98, 1 / 256.00], [0.1492]],
        ],
    },
    {
        modelName: '新ハナビ（RTリプレイ判別版）',
        settingNames: ['設定_1', '設定_2', '設定_5', '設定_6',],
        modeNames: ['通常時', '花火チャレンジ', '花火GAME', 'BIG中', 'REG中',],
        denominatorNamesByMode: ['総ゲーム数', 'HC中ゲーム数', 'HG中ゲーム数', 'BIG中ゲーム数', 'REG中ゲーム数'],
        elementNamesByMode: [
            ['風鈴A', '風鈴B', '氷A', '氷B', 'チェリーA1', 'チェリーA2', 'チェリーB', 'BIG中', 'REG中'],
            ['ハズレ', '通常リプレイ'],
            ['ハズレ', '通常リプレイ', 'RTリプレイ'],
            ['斜め風鈴', 'ハズレ目'],
            ['1枚役', 'ハズレ（フラッシュ有り）'],
        ],
        table: [
            [
                [1 / 15.3, 1 / 15.3, 1 / 52.9, 1 / 1638.4, 1 / 99.4, 1 / 21.0, 1 / 282.5, 1 / 277.7, 1 / 356.2],
                [1 / 6.0, 1 / 3.0],
                [1 / 13.4, 1 / 7.3, 1 / 1.7],
                [1 / 11.0, 1 / 16384.0],
                [1 / 8.0, 0],
            ],
            [
                [1 / 14.9, 1 / 15.6, 1 / 53.5, 1 / 1638.4, 1 / 99.4, 1 / 19.3, 1 / 281.3, 1 / 268.6, 1 / 331.0],
                [1 / 5.8, 1 / 3.1],
                [1 / 12.4, 1 / 7.3, 1 / 1.7],
                [1 / 9.0, 1 / 16384.0],
                [1 / 8.0, 0],
            ],
            [
                [1 / 14.5, 1 / 15.3, 1 / 49.6, 1 / 1638.4, 1 / 99.3, 1 / 20.6, 1 / 276.5, 1 / 256.0, 1 / 306.2],
                [1 / 5.3, 1 / 3.3],
                [1 / 10.1, 1 / 7.3, 1 / 1.8],
                [1 / 11.0, 1 / 16384.0],
                [1 / 7.0, 1 / 376.6],
            ],
            [
                [1 / 14.1, 1 / 15.1, 1 / 50.8, 1 / 1638.4, 1 / 99.3, 1 / 19.9, 1 / 274.2, 1 / 248.2, 1 / 280.1],
                [1 / 5.1, 1 / 3.4],
                [1 / 9.5, 1 / 7.3, 1 / 1.8],
                [1 / 9.0, 1 / 655.4],
                [1 / 7.0, 1 / 376.6],
            ],
        ],
    },
    {
        modelName: '新ハナビ（RT簡易版）',
        settingNames: ['設定_1', '設定_2', '設定_5', '設定_6',],
        modeNames: ['通常時', '花火チャレンジ', '花火GAME', 'BIG中', 'REG中',],
        denominatorNamesByMode: ['総ゲーム数', 'HC中ゲーム数', 'HG中ゲーム数', 'BIG中ゲーム数', 'REG中ゲーム数'],
        elementNamesByMode: [
            ['風鈴A', '風鈴B', '氷A', '氷B', 'チェリーA1', 'チェリーA2', 'チェリーB', 'BIG', 'REG'],
            ['ハズレ', '通常リプレイ'],
            ['ハズレ', 'リプレイ合計'],
            ['斜め風鈴', 'ハズレ目'],
            ['1枚役', 'ハズレ（フラッシュ有り）'],
        ],
        table: [
            [
                [1 / 15.3, 1 / 15.3, 1 / 52.9, 1 / 1638.4, 1 / 99.4, 1 / 21.0, 1 / 282.5, 1 / 277.7, 1 / 356.2],
                [1 / 6.0, 1 / 3.0],
                [1 / 13.4, 1 / 1.379],
                [1 / 11.0, 1 / 16384.0],
                [1 / 8.0, 0],
            ],
            [
                [1 / 14.9, 1 / 15.6, 1 / 53.5, 1 / 1638.4, 1 / 99.4, 1 / 19.3, 1 / 281.3, 1 / 268.6, 1 / 331.0],
                [1 / 5.8, 1 / 3.1],
                [1 / 12.4, 1 / 1.379],
                [1 / 9.0, 1 / 16384.0],
                [1 / 8.0, 0],
            ],
            [
                [1 / 14.5, 1 / 15.3, 1 / 49.6, 1 / 1638.4, 1 / 99.3, 1 / 20.6, 1 / 276.5, 1 / 256.0, 1 / 306.2],
                [1 / 5.3, 1 / 3.3],
                [1 / 10.1, 1 / 1.444],
                [1 / 11.0, 1 / 16384.0],
                [1 / 7.0, 1 / 376.6],
            ],
            [
                [1 / 14.1, 1 / 15.1, 1 / 50.8, 1 / 1638.4, 1 / 99.3, 1 / 19.9, 1 / 274.2, 1 / 248.2, 1 / 280.1],
                [1 / 5.1, 1 / 3.4],
                [1 / 9.5, 1 / 1.444],
                [1 / 9.0, 1 / 655.4],
                [1 / 7.0, 1 / 376.6],
            ],
        ],
    },
    {
        modelName: 'いろはに愛姫（押し順青7のみ）',
        settingNames: ['設定_左', '設定_中', '設定_右', '設定_6',],
        modeNames: ['押し順青7（左1st）', '押し順青7（中1st）', '押し順青7（右1st）'],
        denominatorNamesByMode: ['左1stチャレンジ回数', '中1stチャレンジ回数', '右1stチャレンジ回数'],
        elementNamesByMode: [
            ['成功',], ['成功',], ['成功',],
        ],
        table: [
            [[1 / 2,], [1 / 4,], [1 / 4,],],
            [[1 / 4,], [1 / 2,], [1 / 4,],],
            [[1 / 4,], [1 / 4,], [1 / 2,],],
            [[1 / 3,], [1 / 3,], [1 / 3,],],
        ],
    },
];
